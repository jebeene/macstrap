if command -v mise &> /dev/null; then
  eval "$(mise activate zsh)"
fi

if command -v starship &> /dev/null; then
  eval "$(starship init zsh)"
fi

if command -v zoxide &> /dev/null; then
  eval "$(zoxide init zsh)"
fi

if command -v rbenv &> /dev/null; then
  eval "$(rbenv init - zsh)"
fi

# TODO this slows down the shell startup time
if [[ -s /opt/homebrew/opt/nvm/nvm.sh ]]; then
  export NVM_DIR="$HOME/.nvm"
  source /opt/homebrew/opt/nvm/nvm.sh
  [[ -s /opt/homebrew/opt/nvm/etc/bash_completion.d/nvm ]] && source /opt/homebrew/opt/nvm/etc/bash_completion.d/nvm
fi

if command -v fzf &> /dev/null; then
  if [[ -f /opt/homebrew/opt/fzf/shell/completion.zsh ]]; then
    source /opt/homebrew/opt/fzf/shell/completion.zsh
  fi
  if [[ -f /opt/homebrew/opt/fzf/shell/key-bindings.zsh ]]; then
    source /opt/homebrew/opt/fzf/shell/key-bindings.zsh
  fi
fi

# Conda initialization
if [[ -f /opt/homebrew/anaconda3/etc/profile.d/conda.sh ]]; then
  source /opt/homebrew/anaconda3/etc/profile.d/conda.sh
fi
